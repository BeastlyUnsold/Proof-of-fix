{"version":3,"sources":["../../../node_modules/.pnpm/custom-event@1.0.1/node_modules/custom-event/index.js","../../../src/applications/app-errors.js","../../../src/applications/app.helpers.js","../../../src/utils/assign.js","../../../src/utils/find.js","../../../src/lifecycles/lifecycle.helpers.js","../../../src/devtools/profiler.js","../../../src/lifecycles/bootstrap.js","../../../src/lifecycles/unmount.js","../../../src/lifecycles/mount.js","../../../src/lifecycles/update.js","../../../src/parcels/mount-parcel.js","../../../src/lifecycles/prop.helpers.js","../../../src/applications/timeouts.js","../../../src/lifecycles/load.js","../../../src/utils/runtime-environment.js","../../../src/navigation/navigation-events.js","../../../src/jquery-support.js","../../../src/lifecycles/unload.js","../../../src/applications/apps.js","../../../src/navigation/reroute.js","../../../src/start.js","../../../src/devtools/devtools.js","../../../src/single-spa.js","src/index.ts","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["global","errorHandlers","handleAppError","err","app","newStatus","transformedErr","transformErr","length","forEach","handler","setTimeout","addErrorHandler","Error","formatErrorMessage","push","removeErrorHandler","removedSomething","filter","h","isHandler","code","msg","args","join","ogErr","appOrParcel","errPrefix","objectType","toName","status","result","message","console","warn","JSON","stringify","appOrParcelName","NOT_LOADED","LOADING_SOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UPDATING","UNMOUNTING","UNLOADING","LOAD_ERROR","SKIP_BECAUSE_BROKEN","isActive","shouldBeActive","activeWhen","window","location","name","isParcel","Boolean","unmountThisParcel","assign","i","arguments","key","find","arr","func","validLifecycleFn","fn","isArrayOfFns","Array","isArray","item","flattenFnArray","lifecycle","fns","Promise","resolve","type","props","reduce","resultPromise","index","then","thisPromise","smellsLikeAPromise","reject","promise","catch","profileEntries","getProfilerData","addProfileEntry","kind","start","end","operationSucceeded","toBootstrapPromise","hardFail","startTime","profileEventType","performance","now","bootstrap","successfulBootstrap","reasonableTime","toUnmountPromise","unmountChildrenParcels","Object","keys","parcels","map","parcelId","all","unmountAppOrParcel","parcelError","parentError","beforeFirstMountFired","firstMountFired","toMountPromise","dispatchEvent","CustomEvent","setSkipBecauseBroken","toUpdatePromise","parcelCount","rootParcels","mountRootParcel","mountParcel","apply","config","customProps","owningAppOrParcel","id","domElement","passedConfigLoadingFunction","configLoadingFunction","parcel","parentName","mountPromise","value","resolveUnmount","rejectUnmount","externalRepresentation","loadPromise","prototype","mount","unmount","update","timeouts","ensureValidAppTimeouts","promiseWithoutReturnValue","bootstrapPromise","getStatus","unmountPromise","getProps","bind","singleSpa","unmountSelf","defaultWarningMillis","globalTimeoutConfig","dieOnTimeout","warningMillis","millis","unload","time","warningPeriod","finished","val","maybeTimingOut","errMsg","errored","timeoutConfig","error","numWarnings","numMillis","toLoadPromise","appOpts","isUserErr","loadErrorTime","validationErrMessage","validationErrCode","devtools","isInBrowser","hashchange","popstate","obj","url","currentTarget","current","parseUri","href","destination","hash","callCapturedEventListeners","eventArguments","routingEventsListeningTo","indexOf","eventType","capturedEventListeners","listener","urlRerouteOnly","reroute","updateState","urlAfter","createPopStateEvent","originalMethodName","evt","state","initPopStateEvent","opts","historyApiIsPatched","originalReplaceState","history","replaceState","originalAddEventListener","addEventListener","originalRemoveEventListener","eventName","singleSpaNavigate","anchor","ensureJQuerySupport","jQuery","hasInitialized","originalJQueryOn","originalJQueryOff","off","eventString","captureRoutingEvents","call","originalJQueryFunction","nativeFunctionToCall","originalArgs","replace","trim","appsToUnload","toUnloadPromise","unloadInfo","finishUnloadingApp","errorUnloadingApp","addAppToUnload","get","promiseGetter","getAppUnloadInfo","apps","appsToUnmount","appsToLoad","currentTime","appShouldBeActive","appsToMount","getMountedApps","getAppNames","getRawAppData","getAppStatus","appName","startWarningInitialized","registerApplication","isStarted","options","selectors","registration","checkActivityFunctions","unregisterApplication","unloadPromise","unloadApplication","waitForUnmount","App","appUnloadInfo","immediatelyUnloadApp","appOrLoadApp","validCustomProps","validateRegisterWithConfig","invalidKeys","validKeys","allowsStringAndFunction","sanitizeArguments","appNameOrConfig","loadApp","usingObjectAPI","validateRegisterWithArguments","sanitizeLoadApp","sanitizeCustomProps","sanitizeActiveWhen","activeWhenArray","some","regex","toDynamicPathValidatorRegex","origin","protocol","test","route","inDynamic","regexStr","charIndex","path","endOfDynamic","appendToRegex","charAt","lastIndex","peopleWaitingOnAppChange","currentUrl","triggerAppChange","pendingPromises","profilerKind","cancelPromises","appChangeUnderway","appsThatChanged","performAppChanges","cancelNavigation","loadApps","succeeded","finally","fireSingleSpaEvent","navigationIsCanceled","cancelValues","unloadPromises","unmountFinishedTime","unmountAllPromise","mountPromises","callAllEventListeners","finishUpAndReturn","returnValue","getCustomEventDetail","isBeforeChanges","addApp","detail","newAppStatuses","appsByNewStatus","totalAppChanges","originalEvent","newUrl","extraProperties","statusArr","eventProperties","silentNavigation","started","patchHistoryApi","__SINGLE_SPA_DEVTOOLS__","bundleURL","getBundleURLCached","getBundleURL","matches","stack","match","getBaseURL","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","split","Date","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","document","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","ws","onmessage","event","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","overlay","createErrorOverlay","body","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","concat","Function","deps","cached","cache","cb"],"mappings":"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","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'undefined' !== typeof document && 'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","import { objectType, toName } from \"./app.helpers\";\n\nlet errorHandlers = [];\n\nexport function handleAppError(err, app, newStatus) {\n  const transformedErr = transformErr(err, app, newStatus);\n\n  if (errorHandlers.length) {\n    errorHandlers.forEach((handler) => handler(transformedErr));\n  } else {\n    setTimeout(() => {\n      throw transformedErr;\n    });\n  }\n}\n\nexport function addErrorHandler(handler) {\n  if (typeof handler !== \"function\") {\n    throw Error(\n      formatErrorMessage(\n        28,\n        __DEV__ && \"a single-spa error handler must be a function\"\n      )\n    );\n  }\n\n  errorHandlers.push(handler);\n}\n\nexport function removeErrorHandler(handler) {\n  if (typeof handler !== \"function\") {\n    throw Error(\n      formatErrorMessage(\n        29,\n        __DEV__ && \"a single-spa error handler must be a function\"\n      )\n    );\n  }\n\n  let removedSomething = false;\n  errorHandlers = errorHandlers.filter((h) => {\n    const isHandler = h === handler;\n    removedSomething = removedSomething || isHandler;\n    return !isHandler;\n  });\n\n  return removedSomething;\n}\n\nexport function formatErrorMessage(code, msg, ...args) {\n  return `single-spa minified message #${code}: ${\n    msg ? msg + \" \" : \"\"\n  }See https://single-spa.js.org/error/?code=${code}${\n    args.length ? `&arg=${args.join(\"&arg=\")}` : \"\"\n  }`;\n}\n\nexport function transformErr(ogErr, appOrParcel, newStatus) {\n  const errPrefix = `${objectType(appOrParcel)} '${toName(\n    appOrParcel\n  )}' died in status ${appOrParcel.status}: `;\n\n  let result;\n\n  if (ogErr instanceof Error) {\n    try {\n      ogErr.message = errPrefix + ogErr.message;\n    } catch (err) {\n      /* Some errors have read-only message properties, in which case there is nothing\n       * that we can do.\n       */\n    }\n    result = ogErr;\n  } else {\n    console.warn(\n      formatErrorMessage(\n        30,\n        __DEV__ &&\n          `While ${appOrParcel.status}, '${toName(\n            appOrParcel\n          )}' rejected its lifecycle function promise with a non-Error. This will cause stack traces to not be accurate.`,\n        appOrParcel.status,\n        toName(appOrParcel)\n      )\n    );\n    try {\n      result = Error(errPrefix + JSON.stringify(ogErr));\n    } catch (err) {\n      // If it's not an Error and you can't stringify it, then what else can you even do to it?\n      result = ogErr;\n    }\n  }\n\n  result.appOrParcelName = toName(appOrParcel);\n\n  // We set the status after transforming the error so that the error message\n  // references the state the application was in before the status change.\n  appOrParcel.status = newStatus;\n\n  return result;\n}\n","import { handleAppError } from \"./app-errors.js\";\n\n// App statuses\nexport const NOT_LOADED = \"NOT_LOADED\";\nexport const LOADING_SOURCE_CODE = \"LOADING_SOURCE_CODE\";\nexport const NOT_BOOTSTRAPPED = \"NOT_BOOTSTRAPPED\";\nexport const BOOTSTRAPPING = \"BOOTSTRAPPING\";\nexport const NOT_MOUNTED = \"NOT_MOUNTED\";\nexport const MOUNTING = \"MOUNTING\";\nexport const MOUNTED = \"MOUNTED\";\nexport const UPDATING = \"UPDATING\";\nexport const UNMOUNTING = \"UNMOUNTING\";\nexport const UNLOADING = \"UNLOADING\";\nexport const LOAD_ERROR = \"LOAD_ERROR\";\nexport const SKIP_BECAUSE_BROKEN = \"SKIP_BECAUSE_BROKEN\";\n\nexport function isActive(app) {\n  return app.status === MOUNTED;\n}\n\nexport function shouldBeActive(app) {\n  try {\n    return app.activeWhen(window.location);\n  } catch (err) {\n    handleAppError(err, app, SKIP_BECAUSE_BROKEN);\n    return false;\n  }\n}\n\nexport function toName(app) {\n  return app.name;\n}\n\nexport function isParcel(appOrParcel) {\n  return Boolean(appOrParcel.unmountThisParcel);\n}\n\nexport function objectType(appOrParcel) {\n  return isParcel(appOrParcel) ? \"parcel\" : \"application\";\n}\n","// Object.assign() is not available in IE11. And the babel compiled output for object spread\n// syntax checks a bunch of Symbol stuff and is almost a kb. So this function is the smaller replacement.\nexport function assign() {\n  for (let i = arguments.length - 1; i > 0; i--) {\n    for (let key in arguments[i]) {\n      if (key === \"__proto__\") {\n        continue;\n      }\n      arguments[i - 1][key] = arguments[i][key];\n    }\n  }\n\n  return arguments[0];\n}\n","/* the array.prototype.find polyfill on npmjs.com is ~20kb (not worth it)\n * and lodash is ~200kb (not worth it)\n */\n\nexport function find(arr, func) {\n  for (let i = 0; i < arr.length; i++) {\n    if (func(arr[i])) {\n      return arr[i];\n    }\n  }\n\n  return null;\n}\n","import { find } from \"../utils/find.js\";\nimport { objectType, toName } from \"../applications/app.helpers.js\";\nimport { formatErrorMessage } from \"../applications/app-errors.js\";\n\nexport function validLifecycleFn(fn) {\n  return fn && (typeof fn === \"function\" || isArrayOfFns(fn));\n\n  function isArrayOfFns(arr) {\n    return (\n      Array.isArray(arr) && !find(arr, (item) => typeof item !== \"function\")\n    );\n  }\n}\n\nexport function flattenFnArray(appOrParcel, lifecycle) {\n  let fns = appOrParcel[lifecycle] || [];\n  fns = Array.isArray(fns) ? fns : [fns];\n  if (fns.length === 0) {\n    fns = [() => Promise.resolve()];\n  }\n\n  const type = objectType(appOrParcel);\n  const name = toName(appOrParcel);\n\n  return function (props) {\n    return fns.reduce((resultPromise, fn, index) => {\n      return resultPromise.then(() => {\n        const thisPromise = fn(props);\n        return smellsLikeAPromise(thisPromise)\n          ? thisPromise\n          : Promise.reject(\n              formatErrorMessage(\n                15,\n                __DEV__ &&\n                  `Within ${type} ${name}, the lifecycle function ${lifecycle} at array index ${index} did not return a promise`,\n                type,\n                name,\n                lifecycle,\n                index\n              )\n            );\n      });\n    }, Promise.resolve());\n  };\n}\n\nexport function smellsLikeAPromise(promise) {\n  return (\n    promise &&\n    typeof promise.then === \"function\" &&\n    typeof promise.catch === \"function\"\n  );\n}\n","let profileEntries = [];\n\nexport function getProfilerData() {\n  return profileEntries;\n}\n\n/**\n *\n * @type {'application' | 'parcel' | 'routing'} ProfileType\n *\n * @param {ProfileType} type\n * @param {String} name\n * @param {number} start\n * @param {number} end\n */\nexport function addProfileEntry(\n  type,\n  name,\n  kind,\n  start,\n  end,\n  operationSucceeded\n) {\n  profileEntries.push({\n    type,\n    name,\n    start,\n    end,\n    kind,\n    operationSucceeded,\n  });\n}\n\nexport function clearProfilerData() {\n  profileEntries = [];\n}\n","import {\n  NOT_BOOTSTRAPPED,\n  BOOTSTRAPPING,\n  NOT_MOUNTED,\n  SKIP_BECAUSE_BROKEN,\n  toName,\n  isParcel,\n} from \"../applications/app.helpers.js\";\nimport { reasonableTime } from \"../applications/timeouts.js\";\nimport { handleAppError, transformErr } from \"../applications/app-errors.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nexport function toBootstrapPromise(appOrParcel, hardFail) {\n  let startTime, profileEventType;\n\n  return Promise.resolve().then(() => {\n    if (appOrParcel.status !== NOT_BOOTSTRAPPED) {\n      return appOrParcel;\n    }\n\n    if (__PROFILE__) {\n      profileEventType = isParcel(appOrParcel) ? \"parcel\" : \"application\";\n      startTime = performance.now();\n    }\n\n    appOrParcel.status = BOOTSTRAPPING;\n\n    if (!appOrParcel.bootstrap) {\n      // Default implementation of bootstrap\n      return Promise.resolve().then(successfulBootstrap);\n    }\n\n    return reasonableTime(appOrParcel, \"bootstrap\")\n      .then(successfulBootstrap)\n      .catch((err) => {\n        if (__PROFILE__) {\n          addProfileEntry(\n            profileEventType,\n            toName(appOrParcel),\n            \"bootstrap\",\n            startTime,\n            performance.now(),\n            false\n          );\n        }\n\n        if (hardFail) {\n          throw transformErr(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n        } else {\n          handleAppError(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n          return appOrParcel;\n        }\n      });\n  });\n\n  function successfulBootstrap() {\n    appOrParcel.status = NOT_MOUNTED;\n\n    if (__PROFILE__) {\n      addProfileEntry(\n        profileEventType,\n        toName(appOrParcel),\n        \"bootstrap\",\n        startTime,\n        performance.now(),\n        true\n      );\n    }\n\n    return appOrParcel;\n  }\n}\n","import {\n  UNMOUNTING,\n  NOT_MOUNTED,\n  MOUNTED,\n  SKIP_BECAUSE_BROKEN,\n  toName,\n  isParcel,\n} from \"../applications/app.helpers.js\";\nimport { handleAppError, transformErr } from \"../applications/app-errors.js\";\nimport { reasonableTime } from \"../applications/timeouts.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nexport function toUnmountPromise(appOrParcel, hardFail) {\n  return Promise.resolve().then(() => {\n    if (appOrParcel.status !== MOUNTED) {\n      return appOrParcel;\n    }\n\n    let startTime, profileEventType;\n\n    if (__PROFILE__) {\n      startTime = performance.now();\n      profileEventType = isParcel(appOrParcel) ? \"parcel\" : \"application\";\n    }\n\n    appOrParcel.status = UNMOUNTING;\n\n    const unmountChildrenParcels = Object.keys(appOrParcel.parcels).map(\n      (parcelId) => appOrParcel.parcels[parcelId].unmountThisParcel()\n    );\n\n    let parcelError;\n\n    return Promise.all(unmountChildrenParcels)\n      .then(unmountAppOrParcel, (parcelError) => {\n        // There is a parcel unmount error\n        return unmountAppOrParcel().then(() => {\n          // Unmounting the app/parcel succeeded, but unmounting its children parcels did not\n          const parentError = Error(parcelError.message);\n          if (hardFail) {\n            throw transformErr(parentError, appOrParcel, SKIP_BECAUSE_BROKEN);\n          } else {\n            handleAppError(parentError, appOrParcel, SKIP_BECAUSE_BROKEN);\n          }\n        });\n      })\n      .then(() => appOrParcel);\n\n    function unmountAppOrParcel() {\n      // We always try to unmount the appOrParcel, even if the children parcels failed to unmount.\n      return reasonableTime(appOrParcel, \"unmount\").then(\n        () => {\n          // The appOrParcel needs to stay in a broken status if its children parcels fail to unmount\n          if (!parcelError) {\n            appOrParcel.status = NOT_MOUNTED;\n          }\n\n          if (__PROFILE__) {\n            addProfileEntry(\n              profileEventType,\n              toName(appOrParcel),\n              \"unmount\",\n              startTime,\n              performance.now(),\n              true\n            );\n          }\n        },\n        (err) => {\n          if (__PROFILE__) {\n            addProfileEntry(\n              profileEventType,\n              toName(appOrParcel),\n              \"unmount\",\n              startTime,\n              performance.now(),\n              false\n            );\n          }\n\n          if (hardFail) {\n            throw transformErr(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n          } else {\n            handleAppError(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n          }\n        }\n      );\n    }\n  });\n}\n","import {\n  NOT_MOUNTED,\n  MOUNTED,\n  SKIP_BECAUSE_BROKEN,\n  MOUNTING,\n  toName,\n  isParcel,\n} from \"../applications/app.helpers.js\";\nimport { handleAppError, transformErr } from \"../applications/app-errors.js\";\nimport { reasonableTime } from \"../applications/timeouts.js\";\nimport CustomEvent from \"custom-event\";\nimport { toUnmountPromise } from \"./unmount.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nlet beforeFirstMountFired = false;\nlet firstMountFired = false;\n\nexport function toMountPromise(appOrParcel, hardFail) {\n  return Promise.resolve().then(() => {\n    if (appOrParcel.status !== NOT_MOUNTED) {\n      return appOrParcel;\n    }\n\n    let startTime, profileEventType;\n\n    if (__PROFILE__) {\n      profileEventType = isParcel(appOrParcel) ? \"parcel\" : \"application\";\n      startTime = performance.now();\n    }\n\n    if (!beforeFirstMountFired) {\n      window.dispatchEvent(new CustomEvent(\"single-spa:before-first-mount\"));\n      beforeFirstMountFired = true;\n    }\n\n    appOrParcel.status = MOUNTING;\n\n    return reasonableTime(appOrParcel, \"mount\")\n      .then(() => {\n        appOrParcel.status = MOUNTED;\n\n        if (!firstMountFired) {\n          window.dispatchEvent(new CustomEvent(\"single-spa:first-mount\"));\n          firstMountFired = true;\n        }\n\n        if (__PROFILE__) {\n          addProfileEntry(\n            profileEventType,\n            toName(appOrParcel),\n            \"mount\",\n            startTime,\n            performance.now(),\n            true\n          );\n        }\n\n        return appOrParcel;\n      })\n      .catch((err) => {\n        // If we fail to mount the appOrParcel, we should attempt to unmount it before putting in SKIP_BECAUSE_BROKEN\n        // We temporarily put the appOrParcel into MOUNTED status so that toUnmountPromise actually attempts to unmount it\n        // instead of just doing a no-op.\n        appOrParcel.status = MOUNTED;\n        return toUnmountPromise(appOrParcel, true).then(\n          setSkipBecauseBroken,\n          setSkipBecauseBroken\n        );\n\n        function setSkipBecauseBroken() {\n          if (__PROFILE__) {\n            addProfileEntry(\n              profileEventType,\n              toName(appOrParcel),\n              \"mount\",\n              startTime,\n              performance.now(),\n              false\n            );\n          }\n\n          if (!hardFail) {\n            handleAppError(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n            return appOrParcel;\n          } else {\n            throw transformErr(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n          }\n        }\n      });\n  });\n}\n","import {\n  UPDATING,\n  MOUNTED,\n  SKIP_BECAUSE_BROKEN,\n  toName,\n  isParcel,\n} from \"../applications/app.helpers.js\";\nimport {\n  transformErr,\n  formatErrorMessage,\n} from \"../applications/app-errors.js\";\nimport { reasonableTime } from \"../applications/timeouts.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nexport function toUpdatePromise(appOrParcel) {\n  return Promise.resolve().then(() => {\n    let startTime, profileEventType;\n\n    if (__PROFILE__) {\n      profileEventType = isParcel(appOrParcel) ? \"parcel\" : \"application\";\n      startTime = performance.now();\n    }\n\n    if (appOrParcel.status !== MOUNTED) {\n      throw Error(\n        formatErrorMessage(\n          32,\n          __DEV__ &&\n            `Cannot update parcel '${toName(\n              appOrParcel\n            )}' because it is not mounted`,\n          toName(appOrParcel)\n        )\n      );\n    }\n\n    appOrParcel.status = UPDATING;\n\n    return reasonableTime(appOrParcel, \"update\")\n      .then(() => {\n        appOrParcel.status = MOUNTED;\n\n        if (__PROFILE__) {\n          addProfileEntry(\n            profileEventType,\n            toName(appOrParcel),\n            \"update\",\n            startTime,\n            performance.now(),\n            true\n          );\n        }\n\n        return appOrParcel;\n      })\n      .catch((err) => {\n        if (__PROFILE__) {\n          addProfileEntry(\n            profileEventType,\n            toName(appOrParcel),\n            \"update\",\n            startTime,\n            performance.now(),\n            false\n          );\n        }\n\n        throw transformErr(err, appOrParcel, SKIP_BECAUSE_BROKEN);\n      });\n  });\n}\n","import {\n  validLifecycleFn,\n  flattenFnArray,\n} from \"../lifecycles/lifecycle.helpers.js\";\nimport {\n  NOT_BOOTSTRAPPED,\n  NOT_MOUNTED,\n  MOUNTED,\n  LOADING_SOURCE_CODE,\n  SKIP_BECAUSE_BROKEN,\n  toName,\n} from \"../applications/app.helpers.js\";\nimport { toBootstrapPromise } from \"../lifecycles/bootstrap.js\";\nimport { toMountPromise } from \"../lifecycles/mount.js\";\nimport { toUpdatePromise } from \"../lifecycles/update.js\";\nimport { toUnmountPromise } from \"../lifecycles/unmount.js\";\nimport { ensureValidAppTimeouts } from \"../applications/timeouts.js\";\nimport { formatErrorMessage } from \"../applications/app-errors.js\";\n\nlet parcelCount = 0;\nconst rootParcels = { parcels: {} };\n\n// This is a public api, exported to users of single-spa\nexport function mountRootParcel() {\n  return mountParcel.apply(rootParcels, arguments);\n}\n\nexport function mountParcel(config, customProps) {\n  const owningAppOrParcel = this;\n\n  // Validate inputs\n  if (!config || (typeof config !== \"object\" && typeof config !== \"function\")) {\n    throw Error(\n      formatErrorMessage(\n        2,\n        __DEV__ &&\n          \"Cannot mount parcel without a config object or config loading function\"\n      )\n    );\n  }\n\n  if (config.name && typeof config.name !== \"string\") {\n    throw Error(\n      formatErrorMessage(\n        3,\n        __DEV__ &&\n          `Parcel name must be a string, if provided. Was given ${typeof config.name}`,\n        typeof config.name\n      )\n    );\n  }\n\n  const id = parcelCount++;\n  let name = config.name || `parcel-${id}`;\n\n  if (typeof customProps !== \"object\") {\n    throw Error(\n      formatErrorMessage(\n        4,\n        __DEV__ &&\n          `Parcel ${name} has invalid customProps -- must be an object but was given ${typeof customProps}`,\n        name,\n        typeof customProps\n      )\n    );\n  }\n\n  if (!customProps.domElement) {\n    throw Error(\n      formatErrorMessage(\n        5,\n        __DEV__ &&\n          `Parcel ${name} cannot be mounted without a domElement provided as a prop`,\n        name\n      )\n    );\n  }\n\n  const passedConfigLoadingFunction = typeof config === \"function\";\n  const configLoadingFunction = passedConfigLoadingFunction\n    ? config\n    : () => Promise.resolve(config);\n\n  // Internal representation\n  const parcel = {\n    id,\n    parcels: {},\n    status: passedConfigLoadingFunction\n      ? LOADING_SOURCE_CODE\n      : NOT_BOOTSTRAPPED,\n    customProps,\n    parentName: toName(owningAppOrParcel),\n    unmountThisParcel() {\n      return mountPromise\n        .then(() => {\n          if (parcel.status !== MOUNTED) {\n            throw Error(\n              formatErrorMessage(\n                6,\n                __DEV__ &&\n                  `Cannot unmount parcel '${name}' -- it is in a ${parcel.status} status`,\n                name,\n                parcel.status\n              )\n            );\n          }\n          return toUnmountPromise(parcel, true);\n        })\n        .then((value) => {\n          if (parcel.parentName) {\n            delete owningAppOrParcel.parcels[parcel.id];\n          }\n\n          return value;\n        })\n        .then((value) => {\n          resolveUnmount(value);\n          return value;\n        })\n        .catch((err) => {\n          parcel.status = SKIP_BECAUSE_BROKEN;\n          rejectUnmount(err);\n          throw err;\n        });\n    },\n  };\n\n  // We return an external representation\n  let externalRepresentation;\n\n  // Add to owning app or parcel\n  owningAppOrParcel.parcels[id] = parcel;\n\n  let loadPromise = configLoadingFunction();\n\n  if (!loadPromise || typeof loadPromise.then !== \"function\") {\n    throw Error(\n      formatErrorMessage(\n        7,\n        __DEV__ &&\n          `When mounting a parcel, the config loading function must return a promise that resolves with the parcel config`\n      )\n    );\n  }\n\n  loadPromise = loadPromise.then((config) => {\n    if (!config) {\n      throw Error(\n        formatErrorMessage(\n          8,\n          __DEV__ &&\n            `When mounting a parcel, the config loading function returned a promise that did not resolve with a parcel config`\n        )\n      );\n    }\n\n    name = config.name || `parcel-${id}`;\n\n    if (\n      // ES Module objects don't have the object prototype\n      Object.prototype.hasOwnProperty.call(config, \"bootstrap\") &&\n      !validLifecycleFn(config.bootstrap)\n    ) {\n      throw Error(\n        formatErrorMessage(\n          9,\n          __DEV__ && `Parcel ${name} provided an invalid bootstrap function`,\n          name\n        )\n      );\n    }\n\n    if (!validLifecycleFn(config.mount)) {\n      throw Error(\n        formatErrorMessage(\n          10,\n          __DEV__ && `Parcel ${name} must have a valid mount function`,\n          name\n        )\n      );\n    }\n\n    if (!validLifecycleFn(config.unmount)) {\n      throw Error(\n        formatErrorMessage(\n          11,\n          __DEV__ && `Parcel ${name} must have a valid unmount function`,\n          name\n        )\n      );\n    }\n\n    if (config.update && !validLifecycleFn(config.update)) {\n      throw Error(\n        formatErrorMessage(\n          12,\n          __DEV__ && `Parcel ${name} provided an invalid update function`,\n          name\n        )\n      );\n    }\n\n    const bootstrap = flattenFnArray(config, \"bootstrap\");\n    const mount = flattenFnArray(config, \"mount\");\n    const unmount = flattenFnArray(config, \"unmount\");\n\n    parcel.status = NOT_BOOTSTRAPPED;\n    parcel.name = name;\n    parcel.bootstrap = bootstrap;\n    parcel.mount = mount;\n    parcel.unmount = unmount;\n    parcel.timeouts = ensureValidAppTimeouts(config.timeouts);\n\n    if (config.update) {\n      parcel.update = flattenFnArray(config, \"update\");\n      externalRepresentation.update = function (customProps) {\n        parcel.customProps = customProps;\n\n        return promiseWithoutReturnValue(toUpdatePromise(parcel));\n      };\n    }\n  });\n\n  // Start bootstrapping and mounting\n  // The .then() causes the work to be put on the event loop instead of happening immediately\n  const bootstrapPromise = loadPromise.then(() =>\n    toBootstrapPromise(parcel, true)\n  );\n  const mountPromise = bootstrapPromise.then(() =>\n    toMountPromise(parcel, true)\n  );\n\n  let resolveUnmount, rejectUnmount;\n\n  const unmountPromise = new Promise((resolve, reject) => {\n    resolveUnmount = resolve;\n    rejectUnmount = reject;\n  });\n\n  externalRepresentation = {\n    mount() {\n      return promiseWithoutReturnValue(\n        Promise.resolve().then(() => {\n          if (parcel.status !== NOT_MOUNTED) {\n            throw Error(\n              formatErrorMessage(\n                13,\n                __DEV__ &&\n                  `Cannot mount parcel '${name}' -- it is in a ${parcel.status} status`,\n                name,\n                parcel.status\n              )\n            );\n          }\n\n          // Add to owning app or parcel\n          owningAppOrParcel.parcels[id] = parcel;\n\n          return toMountPromise(parcel);\n        })\n      );\n    },\n    unmount() {\n      return promiseWithoutReturnValue(parcel.unmountThisParcel());\n    },\n    getStatus() {\n      return parcel.status;\n    },\n    loadPromise: promiseWithoutReturnValue(loadPromise),\n    bootstrapPromise: promiseWithoutReturnValue(bootstrapPromise),\n    mountPromise: promiseWithoutReturnValue(mountPromise),\n    unmountPromise: promiseWithoutReturnValue(unmountPromise),\n  };\n\n  return externalRepresentation;\n}\n\nfunction promiseWithoutReturnValue(promise) {\n  return promise.then(() => null);\n}\n","import * as singleSpa from \"../single-spa.js\";\nimport { mountParcel } from \"../parcels/mount-parcel.js\";\nimport { assign } from \"../utils/assign.js\";\nimport { isParcel, toName } from \"../applications/app.helpers.js\";\nimport { formatErrorMessage } from \"../applications/app-errors.js\";\n\nexport function getProps(appOrParcel) {\n  const name = toName(appOrParcel);\n  let customProps =\n    typeof appOrParcel.customProps === \"function\"\n      ? appOrParcel.customProps(name, window.location)\n      : appOrParcel.customProps;\n  if (\n    typeof customProps !== \"object\" ||\n    customProps === null ||\n    Array.isArray(customProps)\n  ) {\n    customProps = {};\n    console.warn(\n      formatErrorMessage(\n        40,\n        __DEV__ &&\n          `single-spa: ${name}'s customProps function must return an object. Received ${customProps}`\n      ),\n      name,\n      customProps\n    );\n  }\n  const result = assign({}, customProps, {\n    name,\n    mountParcel: mountParcel.bind(appOrParcel),\n    singleSpa,\n  });\n\n  if (isParcel(appOrParcel)) {\n    result.unmountSelf = appOrParcel.unmountThisParcel;\n  }\n\n  return result;\n}\n","import { assign } from \"../utils/assign\";\nimport { getProps } from \"../lifecycles/prop.helpers\";\nimport { objectType, toName } from \"./app.helpers\";\nimport { formatErrorMessage } from \"./app-errors\";\n\nconst defaultWarningMillis = 1000;\n\nconst globalTimeoutConfig = {\n  bootstrap: {\n    millis: 4000,\n    dieOnTimeout: false,\n    warningMillis: defaultWarningMillis,\n  },\n  mount: {\n    millis: 3000,\n    dieOnTimeout: false,\n    warningMillis: defaultWarningMillis,\n  },\n  unmount: {\n    millis: 3000,\n    dieOnTimeout: false,\n    warningMillis: defaultWarningMillis,\n  },\n  unload: {\n    millis: 3000,\n    dieOnTimeout: false,\n    warningMillis: defaultWarningMillis,\n  },\n  update: {\n    millis: 3000,\n    dieOnTimeout: false,\n    warningMillis: defaultWarningMillis,\n  },\n};\n\nexport function setBootstrapMaxTime(time, dieOnTimeout, warningMillis) {\n  if (typeof time !== \"number\" || time <= 0) {\n    throw Error(\n      formatErrorMessage(\n        16,\n        __DEV__ &&\n          `bootstrap max time must be a positive integer number of milliseconds`\n      )\n    );\n  }\n\n  globalTimeoutConfig.bootstrap = {\n    millis: time,\n    dieOnTimeout,\n    warningMillis: warningMillis || defaultWarningMillis,\n  };\n}\n\nexport function setMountMaxTime(time, dieOnTimeout, warningMillis) {\n  if (typeof time !== \"number\" || time <= 0) {\n    throw Error(\n      formatErrorMessage(\n        17,\n        __DEV__ &&\n          `mount max time must be a positive integer number of milliseconds`\n      )\n    );\n  }\n\n  globalTimeoutConfig.mount = {\n    millis: time,\n    dieOnTimeout,\n    warningMillis: warningMillis || defaultWarningMillis,\n  };\n}\n\nexport function setUnmountMaxTime(time, dieOnTimeout, warningMillis) {\n  if (typeof time !== \"number\" || time <= 0) {\n    throw Error(\n      formatErrorMessage(\n        18,\n        __DEV__ &&\n          `unmount max time must be a positive integer number of milliseconds`\n      )\n    );\n  }\n\n  globalTimeoutConfig.unmount = {\n    millis: time,\n    dieOnTimeout,\n    warningMillis: warningMillis || defaultWarningMillis,\n  };\n}\n\nexport function setUnloadMaxTime(time, dieOnTimeout, warningMillis) {\n  if (typeof time !== \"number\" || time <= 0) {\n    throw Error(\n      formatErrorMessage(\n        19,\n        __DEV__ &&\n          `unload max time must be a positive integer number of milliseconds`\n      )\n    );\n  }\n\n  globalTimeoutConfig.unload = {\n    millis: time,\n    dieOnTimeout,\n    warningMillis: warningMillis || defaultWarningMillis,\n  };\n}\n\nexport function reasonableTime(appOrParcel, lifecycle) {\n  const timeoutConfig = appOrParcel.timeouts[lifecycle];\n  const warningPeriod = timeoutConfig.warningMillis;\n  const type = objectType(appOrParcel);\n\n  return new Promise((resolve, reject) => {\n    let finished = false;\n    let errored = false;\n\n    appOrParcel[lifecycle](getProps(appOrParcel))\n      .then((val) => {\n        finished = true;\n        resolve(val);\n      })\n      .catch((val) => {\n        finished = true;\n        reject(val);\n      });\n\n    setTimeout(() => maybeTimingOut(1), warningPeriod);\n    setTimeout(() => maybeTimingOut(true), timeoutConfig.millis);\n\n    const errMsg = formatErrorMessage(\n      31,\n      __DEV__ &&\n        `Lifecycle function ${lifecycle} for ${type} ${toName(\n          appOrParcel\n        )} lifecycle did not resolve or reject for ${timeoutConfig.millis} ms.`,\n      lifecycle,\n      type,\n      toName(appOrParcel),\n      timeoutConfig.millis\n    );\n\n    function maybeTimingOut(shouldError) {\n      if (!finished) {\n        if (shouldError === true) {\n          errored = true;\n          if (timeoutConfig.dieOnTimeout) {\n            reject(Error(errMsg));\n          } else {\n            console.error(errMsg);\n            //don't resolve or reject, we're waiting this one out\n          }\n        } else if (!errored) {\n          const numWarnings = shouldError;\n          const numMillis = numWarnings * warningPeriod;\n          console.warn(errMsg);\n          if (numMillis + warningPeriod < timeoutConfig.millis) {\n            setTimeout(() => maybeTimingOut(numWarnings + 1), warningPeriod);\n          }\n        }\n      }\n    }\n  });\n}\n\nexport function ensureValidAppTimeouts(timeouts) {\n  const result = {};\n\n  for (let key in globalTimeoutConfig) {\n    result[key] = assign(\n      {},\n      globalTimeoutConfig[key],\n      (timeouts && timeouts[key]) || {}\n    );\n  }\n\n  return result;\n}\n","import {\n  LOAD_ERROR,\n  NOT_BOOTSTRAPPED,\n  LOADING_SOURCE_CODE,\n  SKIP_BECAUSE_BROKEN,\n  NOT_LOADED,\n  objectType,\n  toName,\n} from \"../applications/app.helpers.js\";\nimport { ensureValidAppTimeouts } from \"../applications/timeouts.js\";\nimport {\n  handleAppError,\n  formatErrorMessage,\n} from \"../applications/app-errors.js\";\nimport {\n  flattenFnArray,\n  smellsLikeAPromise,\n  validLifecycleFn,\n} from \"./lifecycle.helpers.js\";\nimport { getProps } from \"./prop.helpers.js\";\nimport { assign } from \"../utils/assign.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nexport function toLoadPromise(appOrParcel) {\n  return Promise.resolve().then(() => {\n    if (appOrParcel.loadPromise) {\n      return appOrParcel.loadPromise;\n    }\n\n    if (\n      appOrParcel.status !== NOT_LOADED &&\n      appOrParcel.status !== LOAD_ERROR\n    ) {\n      return appOrParcel;\n    }\n\n    let startTime;\n\n    if (__PROFILE__) {\n      startTime = performance.now();\n    }\n\n    appOrParcel.status = LOADING_SOURCE_CODE;\n\n    let appOpts, isUserErr;\n\n    return (appOrParcel.loadPromise = Promise.resolve()\n      .then(() => {\n        const loadPromise = appOrParcel.loadApp(getProps(appOrParcel));\n        if (!smellsLikeAPromise(loadPromise)) {\n          // The name of the app will be prepended to this error message inside of the handleAppError function\n          isUserErr = true;\n          throw Error(\n            formatErrorMessage(\n              33,\n              __DEV__ &&\n                `single-spa loading function did not return a promise. Check the second argument to registerApplication('${toName(\n                  appOrParcel\n                )}', loadingFunction, activityFunction)`,\n              toName(appOrParcel)\n            )\n          );\n        }\n        return loadPromise.then((val) => {\n          appOrParcel.loadErrorTime = null;\n\n          appOpts = val;\n\n          let validationErrMessage, validationErrCode;\n\n          if (typeof appOpts !== \"object\") {\n            validationErrCode = 34;\n            if (__DEV__) {\n              validationErrMessage = `does not export anything`;\n            }\n          }\n\n          if (\n            // ES Modules don't have the Object prototype\n            Object.prototype.hasOwnProperty.call(appOpts, \"bootstrap\") &&\n            !validLifecycleFn(appOpts.bootstrap)\n          ) {\n            validationErrCode = 35;\n            if (__DEV__) {\n              validationErrMessage = `does not export a valid bootstrap function or array of functions`;\n            }\n          }\n\n          if (!validLifecycleFn(appOpts.mount)) {\n            validationErrCode = 36;\n            if (__DEV__) {\n              validationErrMessage = `does not export a mount function or array of functions`;\n            }\n          }\n\n          if (!validLifecycleFn(appOpts.unmount)) {\n            validationErrCode = 37;\n            if (__DEV__) {\n              validationErrMessage = `does not export a unmount function or array of functions`;\n            }\n          }\n\n          const type = objectType(appOpts);\n\n          if (validationErrCode) {\n            let appOptsStr;\n            try {\n              appOptsStr = JSON.stringify(appOpts);\n            } catch {}\n            console.error(\n              formatErrorMessage(\n                validationErrCode,\n                __DEV__ &&\n                  `The loading function for single-spa ${type} '${toName(\n                    appOrParcel\n                  )}' resolved with the following, which does not have bootstrap, mount, and unmount functions`,\n                type,\n                toName(appOrParcel),\n                appOptsStr\n              ),\n              appOpts\n            );\n            handleAppError(\n              validationErrMessage,\n              appOrParcel,\n              SKIP_BECAUSE_BROKEN\n            );\n            return appOrParcel;\n          }\n\n          if (appOpts.devtools && appOpts.devtools.overlays) {\n            appOrParcel.devtools.overlays = assign(\n              {},\n              appOrParcel.devtools.overlays,\n              appOpts.devtools.overlays\n            );\n          }\n\n          appOrParcel.status = NOT_BOOTSTRAPPED;\n          appOrParcel.bootstrap = flattenFnArray(appOpts, \"bootstrap\");\n          appOrParcel.mount = flattenFnArray(appOpts, \"mount\");\n          appOrParcel.unmount = flattenFnArray(appOpts, \"unmount\");\n          appOrParcel.unload = flattenFnArray(appOpts, \"unload\");\n          appOrParcel.timeouts = ensureValidAppTimeouts(appOpts.timeouts);\n\n          delete appOrParcel.loadPromise;\n\n          if (__PROFILE__) {\n            addProfileEntry(\n              \"application\",\n              toName(appOrParcel),\n              \"load\",\n              startTime,\n              performance.now(),\n              true\n            );\n          }\n\n          return appOrParcel;\n        });\n      })\n      .catch((err) => {\n        delete appOrParcel.loadPromise;\n\n        let newStatus;\n        if (isUserErr) {\n          newStatus = SKIP_BECAUSE_BROKEN;\n        } else {\n          newStatus = LOAD_ERROR;\n          appOrParcel.loadErrorTime = new Date().getTime();\n        }\n        handleAppError(err, appOrParcel, newStatus);\n\n        if (__PROFILE__) {\n          addProfileEntry(\n            \"application\",\n            toName(appOrParcel),\n            \"load\",\n            startTime,\n            performance.now(),\n            false\n          );\n        }\n\n        return appOrParcel;\n      }));\n  });\n}\n","export const isInBrowser = typeof window !== \"undefined\";\n","import { reroute } from \"./reroute.js\";\nimport { find } from \"../utils/find.js\";\nimport { formatErrorMessage } from \"../applications/app-errors.js\";\nimport { isInBrowser } from \"../utils/runtime-environment.js\";\n\n/* We capture navigation event listeners so that we can make sure\n * that application navigation listeners are not called until\n * single-spa has ensured that the correct applications are\n * unmounted and mounted.\n */\nconst capturedEventListeners = {\n  hashchange: [],\n  popstate: [],\n};\n\nexport const routingEventsListeningTo = [\"hashchange\", \"popstate\"];\n\nexport function navigateToUrl(obj) {\n  let url;\n  if (typeof obj === \"string\") {\n    url = obj;\n  } else if (this && this.href) {\n    url = this.href;\n  } else if (\n    obj &&\n    obj.currentTarget &&\n    obj.currentTarget.href &&\n    obj.preventDefault\n  ) {\n    url = obj.currentTarget.href;\n    obj.preventDefault();\n  } else {\n    throw Error(\n      formatErrorMessage(\n        14,\n        __DEV__ &&\n          `singleSpaNavigate/navigateToUrl must be either called with a string url, with an <a> tag as its context, or with an event whose currentTarget is an <a> tag`\n      )\n    );\n  }\n\n  const current = parseUri(window.location.href);\n  const destination = parseUri(url);\n\n  if (url.indexOf(\"#\") === 0) {\n    window.location.hash = destination.hash;\n  } else if (current.host !== destination.host && destination.host) {\n    if (process.env.BABEL_ENV === \"test\") {\n      return { wouldHaveReloadedThePage: true };\n    } else {\n      window.location.href = url;\n    }\n  } else if (\n    destination.pathname === current.pathname &&\n    destination.search === current.search\n  ) {\n    window.location.hash = destination.hash;\n  } else {\n    // different path, host, or query params\n    window.history.pushState(null, null, url);\n  }\n}\n\nexport function callCapturedEventListeners(eventArguments) {\n  if (eventArguments) {\n    const eventType = eventArguments[0].type;\n    if (routingEventsListeningTo.indexOf(eventType) >= 0) {\n      capturedEventListeners[eventType].forEach((listener) => {\n        try {\n          // The error thrown by application event listener should not break single-spa down.\n          // Just like https://github.com/single-spa/single-spa/blob/85f5042dff960e40936f3a5069d56fc9477fac04/src/navigation/reroute.js#L140-L146 did\n          listener.apply(this, eventArguments);\n        } catch (e) {\n          setTimeout(() => {\n            throw e;\n          });\n        }\n      });\n    }\n  }\n}\n\nlet urlRerouteOnly;\n\nfunction urlReroute() {\n  reroute([], arguments);\n}\n\nfunction patchedUpdateState(updateState, methodName) {\n  return function () {\n    const urlBefore = window.location.href;\n    const result = updateState.apply(this, arguments);\n    const urlAfter = window.location.href;\n\n    if (!urlRerouteOnly || urlBefore !== urlAfter) {\n      // fire an artificial popstate event so that\n      // single-spa applications know about routing that\n      // occurs in a different application\n      window.dispatchEvent(\n        createPopStateEvent(window.history.state, methodName)\n      );\n    }\n\n    return result;\n  };\n}\n\nfunction createPopStateEvent(state, originalMethodName) {\n  // https://github.com/single-spa/single-spa/issues/224 and https://github.com/single-spa/single-spa-angular/issues/49\n  // We need a popstate event even though the browser doesn't do one by default when you call replaceState, so that\n  // all the applications can reroute. We explicitly identify this extraneous event by setting singleSpa=true and\n  // singleSpaTrigger=<pushState|replaceState> on the event instance.\n  let evt;\n  try {\n    evt = new PopStateEvent(\"popstate\", { state });\n  } catch (err) {\n    // IE 11 compatibility https://github.com/single-spa/single-spa/issues/299\n    // https://docs.microsoft.com/en-us/openspecs/ie_standards/ms-html5e/bd560f47-b349-4d2c-baa8-f1560fb489dd\n    evt = document.createEvent(\"PopStateEvent\");\n    evt.initPopStateEvent(\"popstate\", false, false, state);\n  }\n  evt.singleSpa = true;\n  evt.singleSpaTrigger = originalMethodName;\n  return evt;\n}\n\nexport let originalReplaceState = null;\n\nlet historyApiIsPatched = false;\n\n// We patch the history API so single-spa is notified of all calls to pushState/replaceState.\n// We patch addEventListener/removeEventListener so we can capture all popstate/hashchange event listeners,\n// and delay calling them until single-spa has finished mounting/unmounting applications\nexport function patchHistoryApi(opts) {\n  if (historyApiIsPatched) {\n    throw Error(\n      formatErrorMessage(\n        43,\n        __DEV__ &&\n          `single-spa: patchHistoryApi() was called after the history api was already patched.`\n      )\n    );\n  }\n\n  // True by default, as a performance optimization that reduces\n  // the number of extraneous popstate events\n  urlRerouteOnly =\n    opts && opts.hasOwnProperty(\"urlRerouteOnly\") ? opts.urlRerouteOnly : true;\n\n  historyApiIsPatched = true;\n\n  originalReplaceState = window.history.replaceState;\n\n  // We will trigger an app change for any routing events.\n  window.addEventListener(\"hashchange\", urlReroute);\n  window.addEventListener(\"popstate\", urlReroute);\n\n  // Monkeypatch addEventListener so that we can ensure correct timing\n  const originalAddEventListener = window.addEventListener;\n  const originalRemoveEventListener = window.removeEventListener;\n  window.addEventListener = function (eventName, fn) {\n    if (typeof fn === \"function\") {\n      if (\n        routingEventsListeningTo.indexOf(eventName) >= 0 &&\n        !find(capturedEventListeners[eventName], (listener) => listener === fn)\n      ) {\n        capturedEventListeners[eventName].push(fn);\n        return;\n      }\n    }\n\n    return originalAddEventListener.apply(this, arguments);\n  };\n\n  window.removeEventListener = function (eventName, listenerFn) {\n    if (typeof listenerFn === \"function\") {\n      if (routingEventsListeningTo.indexOf(eventName) >= 0) {\n        capturedEventListeners[eventName] = capturedEventListeners[\n          eventName\n        ].filter((fn) => fn !== listenerFn);\n        return;\n      }\n    }\n\n    return originalRemoveEventListener.apply(this, arguments);\n  };\n\n  window.history.pushState = patchedUpdateState(\n    window.history.pushState,\n    \"pushState\"\n  );\n  window.history.replaceState = patchedUpdateState(\n    originalReplaceState,\n    \"replaceState\"\n  );\n}\n\n// Detect if single-spa has already been loaded on the page.\n// If so, warn because this can result in lots of problems, including\n// lots of extraneous popstate events and unexpected results for\n// apis like getAppNames().\nif (isInBrowser) {\n  if (window.singleSpaNavigate) {\n    console.warn(\n      formatErrorMessage(\n        41,\n        __DEV__ &&\n          \"single-spa has been loaded twice on the page. This can result in unexpected behavior.\"\n      )\n    );\n  } else {\n    /* For convenience in `onclick` attributes, we expose a global function for navigating to\n     * whatever an <a> tag's href is.\n     */\n    window.singleSpaNavigate = navigateToUrl;\n  }\n}\n\nfunction parseUri(str) {\n  const anchor = document.createElement(\"a\");\n  anchor.href = str;\n  return anchor;\n}\n","import { routingEventsListeningTo } from \"./navigation/navigation-events.js\";\n\nlet hasInitialized = false;\n\nexport function ensureJQuerySupport(jQuery = window.jQuery) {\n  if (!jQuery) {\n    if (window.$ && window.$.fn && window.$.fn.jquery) {\n      jQuery = window.$;\n    }\n  }\n\n  if (jQuery && !hasInitialized) {\n    const originalJQueryOn = jQuery.fn.on;\n    const originalJQueryOff = jQuery.fn.off;\n\n    jQuery.fn.on = function (eventString, fn) {\n      return captureRoutingEvents.call(\n        this,\n        originalJQueryOn,\n        window.addEventListener,\n        eventString,\n        fn,\n        arguments\n      );\n    };\n\n    jQuery.fn.off = function (eventString, fn) {\n      return captureRoutingEvents.call(\n        this,\n        originalJQueryOff,\n        window.removeEventListener,\n        eventString,\n        fn,\n        arguments\n      );\n    };\n\n    hasInitialized = true;\n  }\n}\n\nfunction captureRoutingEvents(\n  originalJQueryFunction,\n  nativeFunctionToCall,\n  eventString,\n  fn,\n  originalArgs\n) {\n  if (typeof eventString !== \"string\") {\n    return originalJQueryFunction.apply(this, originalArgs);\n  }\n\n  const eventNames = eventString.split(/\\s+/);\n  eventNames.forEach((eventName) => {\n    if (routingEventsListeningTo.indexOf(eventName) >= 0) {\n      nativeFunctionToCall(eventName, fn);\n      eventString = eventString.replace(eventName, \"\");\n    }\n  });\n\n  if (eventString.trim() === \"\") {\n    return this;\n  } else {\n    return originalJQueryFunction.apply(this, originalArgs);\n  }\n}\n","import {\n  NOT_MOUNTED,\n  UNLOADING,\n  NOT_LOADED,\n  LOAD_ERROR,\n  SKIP_BECAUSE_BROKEN,\n  toName,\n} from \"../applications/app.helpers.js\";\nimport { handleAppError } from \"../applications/app-errors.js\";\nimport { reasonableTime } from \"../applications/timeouts.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nconst appsToUnload = {};\n\nexport function toUnloadPromise(appOrParcel) {\n  return Promise.resolve().then(() => {\n    const unloadInfo = appsToUnload[toName(appOrParcel)];\n\n    if (!unloadInfo) {\n      /* No one has called unloadApplication for this app,\n       */\n      return appOrParcel;\n    }\n\n    if (appOrParcel.status === NOT_LOADED) {\n      /* This app is already unloaded. We just need to clean up\n       * anything that still thinks we need to unload the app.\n       */\n      finishUnloadingApp(appOrParcel, unloadInfo);\n      return appOrParcel;\n    }\n\n    if (appOrParcel.status === UNLOADING) {\n      /* Both unloadApplication and reroute want to unload this app.\n       * It only needs to be done once, though.\n       */\n      return unloadInfo.promise.then(() => appOrParcel);\n    }\n\n    if (\n      appOrParcel.status !== NOT_MOUNTED &&\n      appOrParcel.status !== LOAD_ERROR\n    ) {\n      /* The app cannot be unloaded until it is unmounted.\n       */\n      return appOrParcel;\n    }\n\n    let startTime;\n\n    if (__PROFILE__) {\n      startTime = performance.now();\n    }\n\n    const unloadPromise =\n      appOrParcel.status === LOAD_ERROR\n        ? Promise.resolve()\n        : reasonableTime(appOrParcel, \"unload\");\n\n    appOrParcel.status = UNLOADING;\n\n    return unloadPromise\n      .then(() => {\n        if (__PROFILE__) {\n          addProfileEntry(\n            \"application\",\n            toName(appOrParcel),\n            \"unload\",\n            startTime,\n            performance.now(),\n            true\n          );\n        }\n\n        finishUnloadingApp(appOrParcel, unloadInfo);\n\n        return appOrParcel;\n      })\n      .catch((err) => {\n        if (__PROFILE__) {\n          addProfileEntry(\n            \"application\",\n            toName(appOrParcel),\n            \"unload\",\n            startTime,\n            performance.now(),\n            false\n          );\n        }\n\n        errorUnloadingApp(appOrParcel, unloadInfo, err);\n\n        return appOrParcel;\n      });\n  });\n}\n\nfunction finishUnloadingApp(app, unloadInfo) {\n  delete appsToUnload[toName(app)];\n\n  // Unloaded apps don't have lifecycles\n  delete app.bootstrap;\n  delete app.mount;\n  delete app.unmount;\n  delete app.unload;\n\n  app.status = NOT_LOADED;\n\n  /* resolve the promise of whoever called unloadApplication.\n   * This should be done after all other cleanup/bookkeeping\n   */\n  unloadInfo.resolve();\n}\n\nfunction errorUnloadingApp(app, unloadInfo, err) {\n  delete appsToUnload[toName(app)];\n\n  // Unloaded apps don't have lifecycles\n  delete app.bootstrap;\n  delete app.mount;\n  delete app.unmount;\n  delete app.unload;\n\n  handleAppError(err, app, SKIP_BECAUSE_BROKEN);\n  unloadInfo.reject(err);\n}\n\nexport function addAppToUnload(app, promiseGetter, resolve, reject) {\n  appsToUnload[toName(app)] = { app, resolve, reject };\n  Object.defineProperty(appsToUnload[toName(app)], \"promise\", {\n    get: promiseGetter,\n  });\n}\n\nexport function getAppUnloadInfo(appName) {\n  return appsToUnload[appName];\n}\n","import { ensureJQuerySupport } from \"../jquery-support.js\";\nimport {\n  isActive,\n  toName,\n  NOT_LOADED,\n  NOT_BOOTSTRAPPED,\n  NOT_MOUNTED,\n  MOUNTED,\n  LOAD_ERROR,\n  SKIP_BECAUSE_BROKEN,\n  LOADING_SOURCE_CODE,\n  shouldBeActive,\n} from \"./app.helpers.js\";\nimport { reroute, triggerAppChange } from \"../navigation/reroute.js\";\nimport { find } from \"../utils/find.js\";\nimport { toUnmountPromise } from \"../lifecycles/unmount.js\";\nimport {\n  toUnloadPromise,\n  getAppUnloadInfo,\n  addAppToUnload,\n} from \"../lifecycles/unload.js\";\nimport { formatErrorMessage } from \"./app-errors.js\";\nimport { isInBrowser } from \"../utils/runtime-environment.js\";\nimport { assign } from \"../utils/assign\";\nimport { isStarted } from \"../start.js\";\n\nconst apps = [];\n\nexport function getAppChanges() {\n  const appsToUnload = [],\n    appsToUnmount = [],\n    appsToLoad = [],\n    appsToMount = [];\n\n  // We re-attempt to download applications in LOAD_ERROR after a timeout of 200 milliseconds\n  const currentTime = new Date().getTime();\n\n  apps.forEach((app) => {\n    const appShouldBeActive =\n      app.status !== SKIP_BECAUSE_BROKEN && shouldBeActive(app);\n\n    switch (app.status) {\n      case LOAD_ERROR:\n        if (appShouldBeActive && currentTime - app.loadErrorTime >= 200) {\n          appsToLoad.push(app);\n        }\n        break;\n      case NOT_LOADED:\n      case LOADING_SOURCE_CODE:\n        if (appShouldBeActive) {\n          appsToLoad.push(app);\n        }\n        break;\n      case NOT_BOOTSTRAPPED:\n      case NOT_MOUNTED:\n        if (!appShouldBeActive && getAppUnloadInfo(toName(app))) {\n          appsToUnload.push(app);\n        } else if (appShouldBeActive) {\n          appsToMount.push(app);\n        }\n        break;\n      case MOUNTED:\n        if (!appShouldBeActive) {\n          appsToUnmount.push(app);\n        }\n        break;\n      // all other statuses are ignored\n    }\n  });\n\n  return { appsToUnload, appsToUnmount, appsToLoad, appsToMount };\n}\n\nexport function getMountedApps() {\n  return apps.filter(isActive).map(toName);\n}\n\nexport function getAppNames() {\n  return apps.map(toName);\n}\n\n// used in devtools, not (currently) exposed as a single-spa API\nexport function getRawAppData() {\n  return [...apps];\n}\n\nexport function getAppStatus(appName) {\n  const app = find(apps, (app) => toName(app) === appName);\n  return app ? app.status : null;\n}\n\nlet startWarningInitialized = false;\n\nexport function registerApplication(\n  appNameOrConfig,\n  appOrLoadApp,\n  activeWhen,\n  customProps\n) {\n  const registration = sanitizeArguments(\n    appNameOrConfig,\n    appOrLoadApp,\n    activeWhen,\n    customProps\n  );\n\n  if (!isStarted() && !startWarningInitialized) {\n    startWarningInitialized = true;\n\n    setTimeout(() => {\n      if (!isStarted()) {\n        console.warn(\n          formatErrorMessage(\n            1,\n            __DEV__ &&\n              `singleSpa.start() has not been called, 5000ms after single-spa was loaded. Before start() is called, apps can be declared and loaded, but not bootstrapped or mounted.`\n          )\n        );\n      }\n    }, 5000);\n  }\n\n  if (getAppNames().indexOf(registration.name) !== -1)\n    throw Error(\n      formatErrorMessage(\n        21,\n        __DEV__ &&\n          `There is already an app registered with name ${registration.name}`,\n        registration.name\n      )\n    );\n\n  apps.push(\n    assign(\n      {\n        loadErrorTime: null,\n        status: NOT_LOADED,\n        parcels: {},\n        devtools: {\n          overlays: {\n            options: {},\n            selectors: [],\n          },\n        },\n      },\n      registration\n    )\n  );\n\n  if (isInBrowser) {\n    ensureJQuerySupport();\n    reroute();\n  }\n}\n\nexport function checkActivityFunctions(location = window.location) {\n  return apps.filter((app) => app.activeWhen(location)).map(toName);\n}\n\nexport function unregisterApplication(appName) {\n  if (apps.filter((app) => toName(app) === appName).length === 0) {\n    throw Error(\n      formatErrorMessage(\n        25,\n        __DEV__ &&\n          `Cannot unregister application '${appName}' because no such application has been registered`,\n        appName\n      )\n    );\n  }\n\n  const unloadPromise = isInBrowser\n    ? // See https://github.com/single-spa/single-spa/issues/871 for why waitForUnmount is false\n      unloadApplication(appName, { waitForUnmount: false })\n    : Promise.resolve();\n\n  return unloadPromise.then(() => {\n    const appIndex = apps.map(toName).indexOf(appName);\n    apps.splice(appIndex, 1);\n  });\n}\n\nexport function unloadApplication(appName, opts = { waitForUnmount: false }) {\n  if (typeof appName !== \"string\") {\n    throw Error(\n      formatErrorMessage(\n        26,\n        __DEV__ && `unloadApplication requires a string 'appName'`\n      )\n    );\n  }\n  const app = find(apps, (App) => toName(App) === appName);\n  if (!app) {\n    throw Error(\n      formatErrorMessage(\n        27,\n        __DEV__ &&\n          `Could not unload application '${appName}' because no such application has been registered`,\n        appName\n      )\n    );\n  }\n\n  const appUnloadInfo = getAppUnloadInfo(toName(app));\n  if (opts && opts.waitForUnmount) {\n    // We need to wait for unmount before unloading the app\n\n    if (appUnloadInfo) {\n      // Someone else is already waiting for this, too\n      return appUnloadInfo.promise;\n    } else {\n      // We're the first ones wanting the app to be resolved.\n      const promise = new Promise((resolve, reject) => {\n        addAppToUnload(app, () => promise, resolve, reject);\n      });\n      return promise;\n    }\n  } else {\n    /* We should unmount the app, unload it, and remount it immediately.\n     */\n\n    let resultPromise;\n\n    if (appUnloadInfo) {\n      // Someone else is already waiting for this app to unload\n      resultPromise = appUnloadInfo.promise;\n      immediatelyUnloadApp(app, appUnloadInfo.resolve, appUnloadInfo.reject);\n    } else {\n      // We're the first ones wanting the app to be resolved.\n      resultPromise = new Promise((resolve, reject) => {\n        addAppToUnload(app, () => resultPromise, resolve, reject);\n        immediatelyUnloadApp(app, resolve, reject);\n      });\n    }\n\n    return resultPromise;\n  }\n}\n\nfunction immediatelyUnloadApp(app, resolve, reject) {\n  Promise.resolve()\n    .then(() => {\n      // Before unmounting the application, we first must wait for it to finish mounting\n      // Otherwise, the test for issue 871 in unregister-application.spec.js fails because\n      // the application isn't really unmounted.\n      if (\n        find(checkActivityFunctions(), (activeApp) => activeApp === toName(app))\n      ) {\n        return triggerAppChange();\n      }\n    })\n    .then(() => {\n      return toUnmountPromise(app)\n        .then(toUnloadPromise)\n        .then(() => {\n          resolve();\n          setTimeout(() => {\n            // reroute, but the unload promise is done\n            reroute();\n          });\n        });\n    })\n    .catch(reject);\n}\n\nfunction validateRegisterWithArguments(\n  name,\n  appOrLoadApp,\n  activeWhen,\n  customProps\n) {\n  if (typeof name !== \"string\" || name.length === 0)\n    throw Error(\n      formatErrorMessage(\n        20,\n        __DEV__ &&\n          `The 1st argument to registerApplication must be a non-empty string 'appName'`\n      )\n    );\n\n  if (!appOrLoadApp)\n    throw Error(\n      formatErrorMessage(\n        23,\n        __DEV__ &&\n          \"The 2nd argument to registerApplication must be an application or loading application function\"\n      )\n    );\n\n  if (typeof activeWhen !== \"function\")\n    throw Error(\n      formatErrorMessage(\n        24,\n        __DEV__ &&\n          \"The 3rd argument to registerApplication must be an activeWhen function\"\n      )\n    );\n\n  if (!validCustomProps(customProps))\n    throw Error(\n      formatErrorMessage(\n        22,\n        __DEV__ &&\n          \"The optional 4th argument is a customProps and must be an object\"\n      )\n    );\n}\n\nexport function validateRegisterWithConfig(config) {\n  if (Array.isArray(config) || config === null)\n    throw Error(\n      formatErrorMessage(\n        39,\n        __DEV__ && \"Configuration object can't be an Array or null!\"\n      )\n    );\n  const validKeys = [\"name\", \"app\", \"activeWhen\", \"customProps\"];\n  const invalidKeys = Object.keys(config).reduce(\n    (invalidKeys, prop) =>\n      validKeys.indexOf(prop) >= 0 ? invalidKeys : invalidKeys.concat(prop),\n    []\n  );\n  if (invalidKeys.length !== 0)\n    throw Error(\n      formatErrorMessage(\n        38,\n        __DEV__ &&\n          `The configuration object accepts only: ${validKeys.join(\n            \", \"\n          )}. Invalid keys: ${invalidKeys.join(\", \")}.`,\n        validKeys.join(\", \"),\n        invalidKeys.join(\", \")\n      )\n    );\n  if (typeof config.name !== \"string\" || config.name.length === 0)\n    throw Error(\n      formatErrorMessage(\n        20,\n        __DEV__ &&\n          \"The config.name on registerApplication must be a non-empty string\"\n      )\n    );\n  if (typeof config.app !== \"object\" && typeof config.app !== \"function\")\n    throw Error(\n      formatErrorMessage(\n        20,\n        __DEV__ &&\n          \"The config.app on registerApplication must be an application or a loading function\"\n      )\n    );\n  const allowsStringAndFunction = (activeWhen) =>\n    typeof activeWhen === \"string\" || typeof activeWhen === \"function\";\n  if (\n    !allowsStringAndFunction(config.activeWhen) &&\n    !(\n      Array.isArray(config.activeWhen) &&\n      config.activeWhen.every(allowsStringAndFunction)\n    )\n  )\n    throw Error(\n      formatErrorMessage(\n        24,\n        __DEV__ &&\n          \"The config.activeWhen on registerApplication must be a string, function or an array with both\"\n      )\n    );\n  if (!validCustomProps(config.customProps))\n    throw Error(\n      formatErrorMessage(\n        22,\n        __DEV__ && \"The optional config.customProps must be an object\"\n      )\n    );\n}\n\nfunction validCustomProps(customProps) {\n  return (\n    !customProps ||\n    typeof customProps === \"function\" ||\n    (typeof customProps === \"object\" &&\n      customProps !== null &&\n      !Array.isArray(customProps))\n  );\n}\n\nfunction sanitizeArguments(\n  appNameOrConfig,\n  appOrLoadApp,\n  activeWhen,\n  customProps\n) {\n  const usingObjectAPI = typeof appNameOrConfig === \"object\";\n\n  const registration = {\n    name: null,\n    loadApp: null,\n    activeWhen: null,\n    customProps: null,\n  };\n\n  if (usingObjectAPI) {\n    validateRegisterWithConfig(appNameOrConfig);\n    registration.name = appNameOrConfig.name;\n    registration.loadApp = appNameOrConfig.app;\n    registration.activeWhen = appNameOrConfig.activeWhen;\n    registration.customProps = appNameOrConfig.customProps;\n  } else {\n    validateRegisterWithArguments(\n      appNameOrConfig,\n      appOrLoadApp,\n      activeWhen,\n      customProps\n    );\n    registration.name = appNameOrConfig;\n    registration.loadApp = appOrLoadApp;\n    registration.activeWhen = activeWhen;\n    registration.customProps = customProps;\n  }\n\n  registration.loadApp = sanitizeLoadApp(registration.loadApp);\n  registration.customProps = sanitizeCustomProps(registration.customProps);\n  registration.activeWhen = sanitizeActiveWhen(registration.activeWhen);\n\n  return registration;\n}\n\nfunction sanitizeLoadApp(loadApp) {\n  if (typeof loadApp !== \"function\") {\n    return () => Promise.resolve(loadApp);\n  }\n\n  return loadApp;\n}\n\nfunction sanitizeCustomProps(customProps) {\n  return customProps ? customProps : {};\n}\n\nfunction sanitizeActiveWhen(activeWhen) {\n  let activeWhenArray = Array.isArray(activeWhen) ? activeWhen : [activeWhen];\n  activeWhenArray = activeWhenArray.map((activeWhenOrPath) =>\n    typeof activeWhenOrPath === \"function\"\n      ? activeWhenOrPath\n      : pathToActiveWhen(activeWhenOrPath)\n  );\n\n  return (location) =>\n    activeWhenArray.some((activeWhen) => activeWhen(location));\n}\n\nexport function pathToActiveWhen(path, exactMatch) {\n  const regex = toDynamicPathValidatorRegex(path, exactMatch);\n\n  return (location) => {\n    // compatible with IE10\n    let origin = location.origin;\n    if (!origin) {\n      origin = `${location.protocol}//${location.host}`;\n    }\n    const route = location.href\n      .replace(origin, \"\")\n      .replace(location.search, \"\")\n      .split(\"?\")[0];\n    return regex.test(route);\n  };\n}\n\nfunction toDynamicPathValidatorRegex(path, exactMatch) {\n  let lastIndex = 0,\n    inDynamic = false,\n    regexStr = \"^\";\n\n  if (path[0] !== \"/\") {\n    path = \"/\" + path;\n  }\n\n  for (let charIndex = 0; charIndex < path.length; charIndex++) {\n    const char = path[charIndex];\n    const startOfDynamic = !inDynamic && char === \":\";\n    const endOfDynamic = inDynamic && char === \"/\";\n    if (startOfDynamic || endOfDynamic) {\n      appendToRegex(charIndex);\n    }\n  }\n\n  appendToRegex(path.length);\n  return new RegExp(regexStr, \"i\");\n\n  function appendToRegex(index) {\n    const anyCharMaybeTrailingSlashRegex = \"[^/]+/?\";\n    const commonStringSubPath = escapeStrRegex(path.slice(lastIndex, index));\n\n    regexStr += inDynamic\n      ? anyCharMaybeTrailingSlashRegex\n      : commonStringSubPath;\n\n    if (index === path.length) {\n      if (inDynamic) {\n        if (exactMatch) {\n          // Ensure exact match paths that end in a dynamic portion don't match\n          // urls with characters after a slash after the dynamic portion.\n          regexStr += \"$\";\n        }\n      } else {\n        // For exact matches, expect no more characters. Otherwise, allow\n        // any characters.\n        const suffix = exactMatch ? \"\" : \".*\";\n\n        regexStr =\n          // use charAt instead as we could not use es6 method endsWith\n          regexStr.charAt(regexStr.length - 1) === \"/\"\n            ? `${regexStr}${suffix}$`\n            : `${regexStr}(/${suffix})?(#.*)?$`;\n      }\n    }\n\n    inDynamic = !inDynamic;\n    lastIndex = index;\n  }\n\n  function escapeStrRegex(str) {\n    // borrowed from https://github.com/sindresorhus/escape-string-regexp/blob/master/index.js\n    return str.replace(/[|\\\\{}()[\\]^$+*?.]/g, \"\\\\$&\");\n  }\n}\n","import CustomEvent from \"custom-event\";\nimport { isStarted } from \"../start.js\";\nimport { toLoadPromise } from \"../lifecycles/load.js\";\nimport { toBootstrapPromise } from \"../lifecycles/bootstrap.js\";\nimport { toMountPromise } from \"../lifecycles/mount.js\";\nimport { toUnmountPromise } from \"../lifecycles/unmount.js\";\nimport {\n  getAppStatus,\n  getAppChanges,\n  getMountedApps,\n} from \"../applications/apps.js\";\nimport {\n  callCapturedEventListeners,\n  originalReplaceState,\n} from \"./navigation-events.js\";\nimport { toUnloadPromise } from \"../lifecycles/unload.js\";\nimport {\n  toName,\n  shouldBeActive,\n  NOT_MOUNTED,\n  MOUNTED,\n  NOT_LOADED,\n  SKIP_BECAUSE_BROKEN,\n} from \"../applications/app.helpers.js\";\nimport { assign } from \"../utils/assign.js\";\nimport { isInBrowser } from \"../utils/runtime-environment.js\";\nimport { formatErrorMessage } from \"../applications/app-errors.js\";\nimport { addProfileEntry } from \"../devtools/profiler.js\";\n\nlet appChangeUnderway = false,\n  peopleWaitingOnAppChange = [],\n  currentUrl = isInBrowser && window.location.href;\n\nexport function triggerAppChange() {\n  // Call reroute with no arguments, intentionally\n  return reroute();\n}\n\nexport function reroute(\n  pendingPromises = [],\n  eventArguments,\n  silentNavigation = false\n) {\n  if (appChangeUnderway) {\n    return new Promise((resolve, reject) => {\n      peopleWaitingOnAppChange.push({\n        resolve,\n        reject,\n        eventArguments,\n      });\n    });\n  }\n\n  let startTime, profilerKind;\n\n  if (__PROFILE__) {\n    startTime = performance.now();\n    if (silentNavigation) {\n      profilerKind = \"silentNavigation\";\n    } else if (eventArguments) {\n      profilerKind = \"browserNavigation\";\n    } else {\n      profilerKind = \"triggerAppChange\";\n    }\n  }\n\n  const { appsToUnload, appsToUnmount, appsToLoad, appsToMount } =\n    getAppChanges();\n  let appsThatChanged,\n    cancelPromises = [],\n    oldUrl = currentUrl,\n    newUrl = (currentUrl = window.location.href);\n\n  if (isStarted()) {\n    appChangeUnderway = true;\n    appsThatChanged = appsToUnload.concat(\n      appsToLoad,\n      appsToUnmount,\n      appsToMount\n    );\n    return performAppChanges();\n  } else {\n    appsThatChanged = appsToLoad;\n    return loadApps();\n  }\n\n  function cancelNavigation(val = true) {\n    const promise =\n      typeof val?.then === \"function\" ? val : Promise.resolve(val);\n    cancelPromises.push(\n      promise.catch((err) => {\n        console.warn(\n          Error(\n            formatErrorMessage(\n              42,\n              __DEV__ &&\n                `single-spa: A cancelNavigation promise rejected with the following value: ${err}`\n            )\n          )\n        );\n        console.warn(err);\n\n        // Interpret a Promise rejection to mean that the navigation should not be canceled\n        return false;\n      })\n    );\n  }\n\n  function loadApps() {\n    return Promise.resolve().then(() => {\n      const loadPromises = appsToLoad.map(toLoadPromise);\n      let succeeded;\n\n      return (\n        Promise.all(loadPromises)\n          .then(callAllEventListeners)\n          // there are no mounted apps, before start() is called, so we always return []\n          .then(() => {\n            if (__PROFILE__) {\n              succeeded = true;\n            }\n\n            return [];\n          })\n          .catch((err) => {\n            if (__PROFILE__) {\n              succeeded = false;\n            }\n\n            callAllEventListeners();\n            throw err;\n          })\n          .finally(() => {\n            if (__PROFILE__) {\n              addProfileEntry(\n                \"routing\",\n                \"loadApps\",\n                profilerKind,\n                startTime,\n                performance.now(),\n                succeeded\n              );\n            }\n          })\n      );\n    });\n  }\n\n  function performAppChanges() {\n    return Promise.resolve().then(() => {\n      // https://github.com/single-spa/single-spa/issues/545\n      fireSingleSpaEvent(\n        appsThatChanged.length === 0\n          ? \"before-no-app-change\"\n          : \"before-app-change\",\n        getCustomEventDetail(true)\n      );\n\n      fireSingleSpaEvent(\n        \"before-routing-event\",\n        getCustomEventDetail(true, { cancelNavigation })\n      );\n\n      return Promise.all(cancelPromises).then((cancelValues) => {\n        const navigationIsCanceled = cancelValues.some((v) => v);\n\n        if (navigationIsCanceled) {\n          // Change url back to old url, without triggering the normal single-spa reroute\n          originalReplaceState.call(\n            window.history,\n            history.state,\n            \"\",\n            oldUrl.substring(location.origin.length)\n          );\n\n          // Single-spa's internal tracking of current url needs to be updated after the url change above\n          currentUrl = location.href;\n\n          // necessary for the reroute function to know that the current reroute is finished\n          appChangeUnderway = false;\n\n          if (__PROFILE__) {\n            addProfileEntry(\n              \"routing\",\n              \"navigationCanceled\",\n              profilerKind,\n              startTime,\n              performance.now(),\n              true\n            );\n          }\n\n          // Tell single-spa to reroute again, this time with the url set to the old URL\n          return reroute(pendingPromises, eventArguments, true);\n        }\n\n        const unloadPromises = appsToUnload.map(toUnloadPromise);\n\n        const unmountUnloadPromises = appsToUnmount\n          .map(toUnmountPromise)\n          .map((unmountPromise) => unmountPromise.then(toUnloadPromise));\n\n        const allUnmountPromises = unmountUnloadPromises.concat(unloadPromises);\n\n        const unmountAllPromise = Promise.all(allUnmountPromises);\n\n        let unmountFinishedTime;\n\n        unmountAllPromise.then(\n          () => {\n            if (__PROFILE__) {\n              unmountFinishedTime = performance.now();\n\n              addProfileEntry(\n                \"routing\",\n                \"unmountAndUnload\",\n                profilerKind,\n                startTime,\n                performance.now(),\n                true\n              );\n            }\n            fireSingleSpaEvent(\n              \"before-mount-routing-event\",\n              getCustomEventDetail(true)\n            );\n          },\n          (err) => {\n            if (__PROFILE__) {\n              addProfileEntry(\n                \"routing\",\n                \"unmountAndUnload\",\n                profilerKind,\n                startTime,\n                performance.now(),\n                true\n              );\n            }\n\n            throw err;\n          }\n        );\n\n        /* We load and bootstrap apps while other apps are unmounting, but we\n         * wait to mount the app until all apps are finishing unmounting\n         */\n        const loadThenMountPromises = appsToLoad.map((app) => {\n          return toLoadPromise(app).then((app) =>\n            tryToBootstrapAndMount(app, unmountAllPromise)\n          );\n        });\n\n        /* These are the apps that are already bootstrapped and just need\n         * to be mounted. They each wait for all unmounting apps to finish up\n         * before they mount.\n         */\n        const mountPromises = appsToMount\n          .filter((appToMount) => appsToLoad.indexOf(appToMount) < 0)\n          .map((appToMount) => {\n            return tryToBootstrapAndMount(appToMount, unmountAllPromise);\n          });\n        return unmountAllPromise\n          .catch((err) => {\n            callAllEventListeners();\n            throw err;\n          })\n          .then(() => {\n            /* Now that the apps that needed to be unmounted are unmounted, their DOM navigation\n             * events (like hashchange or popstate) should have been cleaned up. So it's safe\n             * to let the remaining captured event listeners to handle about the DOM event.\n             */\n            callAllEventListeners();\n\n            return Promise.all(loadThenMountPromises.concat(mountPromises))\n              .catch((err) => {\n                pendingPromises.forEach((promise) => promise.reject(err));\n                throw err;\n              })\n              .then(finishUpAndReturn)\n              .then(\n                () => {\n                  if (__PROFILE__) {\n                    addProfileEntry(\n                      \"routing\",\n                      \"loadAndMount\",\n                      profilerKind,\n                      unmountFinishedTime,\n                      performance.now(),\n                      true\n                    );\n                  }\n                },\n                (err) => {\n                  if (__PROFILE__) {\n                    addProfileEntry(\n                      \"routing\",\n                      \"loadAndMount\",\n                      profilerKind,\n                      unmountFinishedTime,\n                      performance.now(),\n                      false\n                    );\n                  }\n\n                  throw err;\n                }\n              );\n          });\n      });\n    });\n  }\n\n  function finishUpAndReturn() {\n    const returnValue = getMountedApps();\n    pendingPromises.forEach((promise) => promise.resolve(returnValue));\n\n    try {\n      const appChangeEventName =\n        appsThatChanged.length === 0 ? \"no-app-change\" : \"app-change\";\n      fireSingleSpaEvent(appChangeEventName, getCustomEventDetail());\n      fireSingleSpaEvent(\"routing-event\", getCustomEventDetail());\n    } catch (err) {\n      /* We use a setTimeout because if someone else's event handler throws an error, single-spa\n       * needs to carry on. If a listener to the event throws an error, it's their own fault, not\n       * single-spa's.\n       */\n      setTimeout(() => {\n        throw err;\n      });\n    }\n\n    /* Setting this allows for subsequent calls to reroute() to actually perform\n     * a reroute instead of just getting queued behind the current reroute call.\n     * We want to do this after the mounting/unmounting is done but before we\n     * resolve the promise for the `reroute` function.\n     */\n    appChangeUnderway = false;\n\n    if (peopleWaitingOnAppChange.length > 0) {\n      /* While we were rerouting, someone else triggered another reroute that got queued.\n       * So we need reroute again.\n       */\n      const nextPendingPromises = peopleWaitingOnAppChange;\n      peopleWaitingOnAppChange = [];\n      reroute(nextPendingPromises);\n    }\n\n    return returnValue;\n  }\n\n  /* We need to call all event listeners that have been delayed because they were\n   * waiting on single-spa. This includes haschange and popstate events for both\n   * the current run of performAppChanges(), but also all of the queued event listeners.\n   * We want to call the listeners in the same order as if they had not been delayed by\n   * single-spa, which means queued ones first and then the most recent one.\n   */\n  function callAllEventListeners() {\n    // During silent navigation (when navigation was canceled and we're going back to the old URL),\n    // we should not fire any popstate / hashchange events\n    if (!silentNavigation) {\n      pendingPromises.forEach((pendingPromise) => {\n        callCapturedEventListeners(pendingPromise.eventArguments);\n      });\n\n      callCapturedEventListeners(eventArguments);\n    }\n  }\n\n  function getCustomEventDetail(isBeforeChanges = false, extraProperties) {\n    const newAppStatuses = {};\n    const appsByNewStatus = {\n      // for apps that were mounted\n      [MOUNTED]: [],\n      // for apps that were unmounted\n      [NOT_MOUNTED]: [],\n      // apps that were forcibly unloaded\n      [NOT_LOADED]: [],\n      // apps that attempted to do something but are broken now\n      [SKIP_BECAUSE_BROKEN]: [],\n    };\n\n    if (isBeforeChanges) {\n      appsToLoad.concat(appsToMount).forEach((app, index) => {\n        addApp(app, MOUNTED);\n      });\n      appsToUnload.forEach((app) => {\n        addApp(app, NOT_LOADED);\n      });\n      appsToUnmount.forEach((app) => {\n        addApp(app, NOT_MOUNTED);\n      });\n    } else {\n      appsThatChanged.forEach((app) => {\n        addApp(app);\n      });\n    }\n\n    const result = {\n      detail: {\n        newAppStatuses,\n        appsByNewStatus,\n        totalAppChanges: appsThatChanged.length,\n        originalEvent: eventArguments?.[0],\n        oldUrl,\n        newUrl,\n      },\n    };\n\n    if (extraProperties) {\n      assign(result.detail, extraProperties);\n    }\n\n    return result;\n\n    function addApp(app, status) {\n      const appName = toName(app);\n      status = status || getAppStatus(appName);\n      newAppStatuses[appName] = status;\n      const statusArr = (appsByNewStatus[status] =\n        appsByNewStatus[status] || []);\n      statusArr.push(appName);\n    }\n  }\n\n  function fireSingleSpaEvent(name, eventProperties) {\n    // During silent navigation (caused by navigation cancelation), we should not\n    // fire any single-spa events\n    if (!silentNavigation) {\n      window.dispatchEvent(\n        new CustomEvent(`single-spa:${name}`, eventProperties)\n      );\n    }\n  }\n}\n\n/**\n * Let's imagine that some kind of delay occurred during application loading.\n * The user without waiting for the application to load switched to another route,\n * this means that we shouldn't bootstrap and mount that application, thus we check\n * twice if that application should be active before bootstrapping and mounting.\n * https://github.com/single-spa/single-spa/issues/524\n */\nfunction tryToBootstrapAndMount(app, unmountAllPromise) {\n  if (shouldBeActive(app)) {\n    return toBootstrapPromise(app).then((app) =>\n      unmountAllPromise.then(() =>\n        shouldBeActive(app) ? toMountPromise(app) : app\n      )\n    );\n  } else {\n    return unmountAllPromise.then(() => app);\n  }\n}\n","import { reroute } from \"./navigation/reroute.js\";\nimport { patchHistoryApi } from \"./navigation/navigation-events.js\";\nimport { isInBrowser } from \"./utils/runtime-environment.js\";\n\nlet started = false;\n\nexport function start(opts) {\n  started = true;\n  if (isInBrowser) {\n    patchHistoryApi(opts);\n    reroute();\n  }\n}\n\nexport function isStarted() {\n  return started;\n}\n","import { getRawAppData, unregisterApplication } from \"../applications/apps\";\nimport { reroute } from \"../navigation/reroute\";\nimport { NOT_LOADED } from \"../applications/app.helpers\";\nimport { toLoadPromise } from \"../lifecycles/load\";\nimport { toBootstrapPromise } from \"../lifecycles/bootstrap\";\nimport { getProfilerData } from \"./profiler\";\n\nexport default {\n  getRawAppData,\n  reroute,\n  NOT_LOADED,\n  toLoadPromise,\n  toBootstrapPromise,\n  unregisterApplication,\n  getProfilerData,\n};\n","export { start } from \"./start.js\";\nexport { ensureJQuerySupport } from \"./jquery-support.js\";\nexport {\n  setBootstrapMaxTime,\n  setMountMaxTime,\n  setUnmountMaxTime,\n  setUnloadMaxTime,\n} from \"./applications/timeouts.js\";\nexport {\n  registerApplication,\n  unregisterApplication,\n  getMountedApps,\n  getAppStatus,\n  unloadApplication,\n  checkActivityFunctions,\n  getAppNames,\n  pathToActiveWhen,\n} from \"./applications/apps.js\";\nexport {\n  navigateToUrl,\n  patchHistoryApi,\n} from \"./navigation/navigation-events.js\";\nexport { triggerAppChange } from \"./navigation/reroute.js\";\nexport {\n  addErrorHandler,\n  removeErrorHandler,\n} from \"./applications/app-errors.js\";\nexport { mountRootParcel } from \"./parcels/mount-parcel.js\";\n\nexport {\n  NOT_LOADED,\n  LOADING_SOURCE_CODE,\n  NOT_BOOTSTRAPPED,\n  BOOTSTRAPPING,\n  NOT_MOUNTED,\n  MOUNTING,\n  UPDATING,\n  LOAD_ERROR,\n  MOUNTED,\n  UNLOADING,\n  UNMOUNTING,\n  SKIP_BECAUSE_BROKEN,\n} from \"./applications/app.helpers.js\";\n\nimport devtools from \"./devtools/devtools\";\nimport { isInBrowser } from \"./utils/runtime-environment.js\";\n\nif (isInBrowser && window.__SINGLE_SPA_DEVTOOLS__) {\n  window.__SINGLE_SPA_DEVTOOLS__.exposedMethods = devtools;\n}\n","import \"./styles.css\";\nimport { registerApplication, start, navigateToUrl } from \"single-spa/lib/es2015/esm/single-spa.dev.js\";\n// some setup stuff that can mostly be ignored\nconst appOneNode = document.getElementById(\"applicationOne\");\nconst appTwoNode = document.getElementById(\"applicationTwo\");\nconst parcelNode = document.getElementById(\"parcel-node\");\nlet app1MountParcel;\nlet parcel;\n\n// @ts-ignore\nwindow.navigateToAppOne = global_navigateToAppOne;\n// @ts-ignore\nwindow.navigateToAppTwo = global_navigateToAppTwo;\n// @ts-ignore\nwindow.mountParcelInAppOneContext = global_mountParcelInAppOneContext;\n// @ts-ignore\nwindow.parcelNavToTwo = global_parcelNavToTwo;\nfunction global_navigateToAppOne() {\n  navigateToUrl(\"app1\");\n}\nfunction global_navigateToAppTwo() {\n  navigateToUrl(\"app2\");\n}\nfunction global_mountParcelInAppOneContext() {\n  if (app1MountParcel) {\n    parcel = app1MountParcel(parcel, { domElement: parcelNode });\n  }\n}\nfunction global_parcelNavToTwo() {\n  parcel.unmount();\n  global_navigateToAppTwo();\n}\n\n// defining applications and single spa parcel\nconst applicationOne = {\n  bootstrap: () => Promise.resolve(),\n  mount: (applicationProps) => {\n    app1MountParcel = applicationProps.mountParcel;\n    if (appOneNode) {\n      appOneNode.innerHTML = `\n      <div>\n        <p>application one is mounted</p>\n        <button onclick=\"mountParcelInAppOneContext()\">Mount parcel</button>\n      </div>\n      `;\n    }\n    return Promise.resolve();\n  },\n  unmount: () => {\n    if (appOneNode) {\n      appOneNode.innerHTML = ``;\n    }\n    return Promise.resolve();\n  },\n};\nconst applicationTwo = {\n  bootstrap: () => Promise.resolve(),\n  mount: () => {\n    if (appTwoNode) {\n      appTwoNode.innerHTML = `<p>application Two is mounted</p>`;\n    }\n    return Promise.resolve();\n  },\n  unmount: () => {\n    if (appTwoNode) {\n      appTwoNode.innerHTML = ``;\n    }\n    return Promise.resolve();\n  },\n};\n\nconst parcel = {\n  bootstrap: () => Promise.resolve(),\n  mount: () => {\n    if (parcelNode) {\n      parcelNode.innerHTML = `\n      <div>\n        <p>Parcel is mounted</p>\n        <button onclick=\"parcelNavToTwo()\">Unmount parcel and navigate to app 2</button>\n      </div>`;\n    }\n    return Promise.resolve();\n  },\n  unmount: () => {\n    // add an arbitrary delay here to make the bug more visible\n    return new Promise((r) => {\n      return setTimeout(r, 1100);\n    }).then(() => {\n      if (parcelNode) {\n        parcelNode.innerHTML = ``;\n      }\n    });\n  },\n};\n\n// registering applications\nregisterApplication({\n  name: \"AppOne\",\n  app: applicationOne,\n  activeWhen: `/app1`,\n});\n\nregisterApplication({\n  name: \"AppTwo\",\n  app: applicationTwo,\n  activeWhen: `/app2`,\n});\n\n// calling single-spa start\nstart();\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}